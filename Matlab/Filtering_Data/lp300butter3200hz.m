function y = doFilter(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.2 and the DSP System Toolbox 9.4.
% Generated on: 15-Mar-2018 13:18:41

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fpass = 300;   % Passband Frequency
    % Fstop = 310;   % Stopband Frequency
    % Apass = 1;     % Passband Ripple (dB)
    % Astop = 80;    % Stopband Attenuation (dB)
    % Fs    = 3200;  % Sampling Frequency
    %
    % h = fdesign.lowpass('fp,fst,ap,ast', Fpass, Fstop, Apass, Astop, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'MatchExactly', 'stopband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 2 1 1 -1.65635231339217 0.99386095396318; 1 2 1 1 ...
        -1.64624654837953 0.981695975470558; 1 2 1 1 -1.63626517181446 ...
        0.969680731588568; 1 2 1 1 -1.62640710104203 0.957813919053804; 1 2 1 1 ...
        -1.61667125125194 0.946094232008259; 1 2 1 1 -1.6070565362809 ...
        0.934520362965279; 1 2 1 1 -1.59756186937557 0.923091003727906; 1 2 1 1 ...
        -1.58818616391735 0.911804846261365; 1 2 1 1 -1.57892833411045 ...
        0.900660583521389; 1 2 1 1 -1.56978729563476 0.889656910240056; 1 2 1 1 ...
        -1.56076196626467 0.87879252367073; 1 2 1 1 -1.55185126645524 ...
        0.868066124293706; 1 2 1 1 -1.54305411989705 0.857476416484052; 1 2 1 1 ...
        -1.5343694540408 0.84702210914316; 1 2 1 1 -1.525796200593 ...
        0.836701916295427; 1 2 1 1 -1.51733329598386 0.826514557651464; 1 2 1 1 ...
        -1.50897968180845 0.816458759139187; 1 2 1 1 -1.50073430524235 ...
        0.806533253404107; 1 2 1 1 -1.49259611943264 0.796736780280081; 1 2 1 1 ...
        -1.48456408386554 0.787068087231749; 1 2 1 1 -1.47663716471136 ...
        0.777525929769859; 1 2 1 1 -1.46881433514795 0.768109071840617; 1 2 1 1 ...
        -1.46109457566354 0.758816286190183; 1 2 1 1 -1.45347687433973 ...
        0.749646354705378; 1 2 1 1 -1.44596022711564 0.740598068731645; 1 2 1 1 ...
        -1.43854363803399 0.731670229369263; 1 2 1 1 -1.43122611946992 ...
        0.722861647748774; 1 2 1 1 -1.42400669234327 0.714171145286571; 1 2 1 1 ...
        -1.41688438631519 0.705597553921526; 1 2 1 1 -1.40985823996967 ...
        0.697139716333529; 1 2 1 1 -1.40292730098076 0.688796486144789; 1 2 1 1 ...
        -1.39609062626615 0.680566728104674; 1 2 1 1 -1.38934728212768 ...
        0.67244931825888; 1 2 1 1 -1.38269634437947 0.664443144103674; 1 2 1 1 ...
        -1.37613689846426 0.656547104725921; 1 2 1 1 -1.36966803955848 ...
        0.648760110929585; 1 2 1 1 -1.36328887266667 0.641081085349372; 1 2 1 1 ...
        -1.35699851270575 0.63350896255215; 1 2 1 1 -1.35079608457955 ...
        0.626042689126749; 1 2 1 1 -1.34468072324436 0.618681223762747; 1 2 1 1 ...
        -1.33865157376559 0.611423537318796; 1 2 1 1 -1.33270779136638 ...
        0.604268612881022; 1 2 1 1 -1.32684854146822 0.597215445812043; 1 2 1 1 ...
        -1.32107299972437 0.590263043791085; 1 2 1 1 -1.31538035204613 ...
        0.583410426845677; 1 2 1 1 -1.30976979462258 0.576656627375401; 1 2 1 1 ...
        -1.30424053393408 0.570000690168117; 1 2 1 1 -1.29879178675984 ...
        0.563441672409096; 1 2 1 1 -1.29342278017996 0.556978643683474; 1 2 1 1 ...
        -1.28813275157222 0.550610685972395; 1 2 1 1 -1.28292094860396 ...
        0.544336893643233; 1 2 1 1 -1.27778662921936 0.538156373434243; 1 2 1 1 ...
        -1.27272906162229 0.532068244433974; 1 2 1 1 -1.26774752425517 ...
        0.526071638055785; 1 2 1 1 -1.26284130577396 0.520165698007764; 1 2 1 1 ...
        -1.25800970501963 0.514349580258356; 1 2 1 1 -1.25325203098627 ...
        0.508622452997978; 1 2 1 1 -1.24856760278606 0.502983496596906; 1 2 1 1 ...
        -1.24395574961147 0.497431903559676; 1 2 1 1 -1.23941581069464 ...
        0.491966878476274; 1 2 1 1 -1.23494713526439 0.48658763797033; 1 2 1 1 ...
        -1.23054908250086 0.481293410644555; 1 2 1 1 -1.2262210214881 ...
        0.476083437023638; 1 2 1 1 -1.22196233116467 0.47095696949481; 1 2 1 1 ...
        -1.21777240027251 0.465913272246267; 1 2 1 1 -1.21365062730417 ...
        0.460951621203652; 1 2 1 1 -1.20959642044855 0.456071303964764; 1 2 1 1 ...
        -1.20560919753536 0.451271619732683; 1 2 1 1 -1.20168838597837 ...
        0.446551879247449; 1 2 1 1 -1.1978334227176 0.441911404716477; 1 2 1 1 ...
        -1.19404375416057 0.437349529743846; 1 2 1 1 -1.19031883612274 ...
        0.4328655992586; 1 2 1 1 -1.18665813376727 0.428458969442198; 1 2 1 1 ...
        -1.1830611215441 0.424129007655253; 1 2 1 1 -1.17952728312864 ...
        0.419875092363662; 1 2 1 1 -1.17605611135998 0.415696613064262; 1 2 1 1 ...
        -1.17264710817885 0.41159297021011; 1 2 1 1 -1.16929978456527 ...
        0.407563575135503; 1 2 1 1 -1.16601366047618 0.403607849980824; 1 2 1 1 ...
        -1.16278826478296 0.399725227617329; 1 2 1 1 -1.15962313520889 ...
        0.395915151571942; 1 2 1 1 -1.15651781826682 0.392177075952161; 1 2 1 1 ...
        -1.15347186919696 0.388510465371157; 1 2 1 1 -1.15048485190482 ...
        0.384914794873125; 1 2 1 1 -1.14755633889952 0.381389549858981; 1 2 1 1 ...
        -1.14468591123238 0.377934226012467; 1 2 1 1 -1.14187315843594 ...
        0.374548329226724; 1 2 1 1 -1.1391176784634 0.371231375531405; 1 2 1 1 ...
        -1.1364190776286 0.367982891020377; 1 2 1 1 -1.13377697054641 ...
        0.364802411780084; 1 2 1 1 -1.13119098007392 0.361689483818602; 1 2 1 1 ...
        -1.12866073725204 0.358643662995456; 1 2 1 1 -1.1261858812479 ...
        0.355664514952236; 1 2 1 1 -1.12376605929793 0.352751615044057; 1 2 1 1 ...
        -1.12140092665162 0.349904548271913; 1 2 1 1 -1.11909014651612 ...
        0.347122909215954; 1 2 1 1 -1.11683339000162 0.344406301969729; 1 2 1 1 ...
        -1.11463033606755 0.341754340075441; 1 2 1 1 -1.11248067146962 ...
        0.339166646460221; 1 2 1 1 -1.11038409070785 0.336642853373487; 1 2 1 1 ...
        -1.10834029597535 0.334182602325386; 1 2 1 1 -1.10634899710818 ...
        0.331785544026367; 1 2 1 1 -1.10440991153609 0.329451338327911; 1 2 1 1 ...
        -1.10252276423427 0.327179654164424; 1 2 1 1 -1.10068728767603 ...
        0.324970169496344; 1 2 1 1 -1.09890322178663 0.322822571254464; 1 2 1 1 ...
        -1.09717031389799 0.320736555285494; 1 2 1 1 -1.09548831870455 ...
        0.318711826298889; 1 2 1 1 -1.09385699822016 0.316748097814962; 1 2 1 1 ...
        -1.09227612173604 0.314845092114282; 1 2 1 1 -1.09074546577986 ...
        0.313002540188395; 1 2 1 1 -1.08926481407586 0.311220181691871; 1 2 1 1 ...
        -1.0878339575062 0.309497764895688; 1 2 1 1 -1.08645269407327 ...
        0.30783504664198; 1 2 1 1 -1.08512082886332 0.306231792300141; 1 2 1 1 ...
        -1.08383817401109 0.304687775724319; 1 2 1 1 -1.08260454866565 ...
        0.30320277921229; 1 2 1 1 -1.08141977895745 0.301776593465737; 1 2 1 1 ...
        -1.08028369796641 0.300409017551931; 1 2 1 1 -1.07919614569134 ...
        0.299099858866838; 1 2 1 1 -1.07815696902044 0.297848933099642; 1 2 1 1 ...
        -1.07716602170302 0.296656064198703; 1 2 1 1 -1.07622316432241 ...
        0.295521084338956; 1 2 1 1 -1.07532826427011 0.294443833890751; 1 2 1 1 ...
        -1.07448119572106 0.293424161390149; 1 2 1 1 -1.07368183961023 ...
        0.292461923510671; 1 2 1 1 -1.0729300836103 0.291556985036507; 1 2 1 1 ...
        -1.0722258221107 0.290709218837197; 1 2 1 1 -1.07156895619772 ...
        0.289918505843776; 1 2 1 1 -1.07095939363597 0.289184735026393; 1 2 1 1 ...
        -1.07039704885099 0.288507803373415; 1 2 1 1 -1.06988184291316 ...
        0.287887615872002; 1 2 1 1 -1.06941370352272 0.287324085490173; 1 2 1 1 ...
        -1.06899256499618 0.286817133160349; 1 2 1 1 -1.06861836825384 ...
        0.286366687764401; 1 2 1 1 -1.06829106080865 0.285972686120168; 1 2 1 1 ...
        -1.0680105967562 0.285635072969481; 1 2 1 1 -1.06777693676605 ...
        0.285353800967682; 1 2 1 1 -1.06759004807423 0.285128830674626; 1 2 1 1 ...
        -1.06744990447706 0.284960130547192; 1 2 1 1 -1.06735648632613 ...
        0.284847676933289; 1 2 1 1 -1.06730978052457 0.284791454067353], ...
        'ScaleValues', [0.084377160142753; 0.0838623567727563; ...
        0.0833538899435274; 0.0828517045029431; 0.0823557451890806; ...
        0.0818659566710951; 0.081382283588083; 0.0809046705860038; ...
        0.0804330623527342; 0.0799674036513227; 0.0795076393515151; ...
        0.0790537144596156; 0.0786055741467497; 0.0781631637755899; ...
        0.0777264289256063; 0.0772953154169011; 0.0768697693326833; ...
        0.0764497370404405; 0.0760351652118598; 0.0756260008415517; ...
        0.0752221912646257; 0.0748236841731668; 0.0744304276316611; ...
        0.0740423700914131; 0.0736594604040021; 0.073281647833817; ...
        0.0729088820697123; 0.0725411132358241; 0.0721782919015836; ...
        0.0718203690909657; 0.0714672962910075; 0.0711190254596305; ...
        0.0707755090327997; 0.0704366999310507; 0.0701025515654157; ...
        0.0697730178427767; 0.0694480531706746; 0.0691276124616012; ...
        0.0688116511367994; 0.0685001251295976; 0.0681929908883006; ...
        0.0678902053786615; 0.0675917260859556; 0.0672975110166785; ...
        0.0670075186998872; 0.0667217081882049; 0.0664400390585081; ...
        0.0661624714123129; 0.0658889658758787; 0.0656194836000449; ...
        0.0653539862598178; 0.0650924360537199; 0.06483479570292; ...
        0.0645810284501535; 0.0643310980584505; 0.0640849688096804; ...
        0.0638426055029282; 0.0636039734527114; 0.0633690384870516; ...
        0.0631377669454079; 0.0629101256764848; 0.0626860820359234; ...
        0.0624656038838849; 0.0622486595825349; 0.0620352179934381; ...
        0.0618252484748701; 0.0616187208790543; 0.0614156055493318; ...
        0.0612158733172706; 0.0610194954997202; 0.0608264438958199; ...
        0.0606366907839639; 0.0604502089187319; 0.060266971527788; ...
        0.0600869523087553; 0.0599101254260693; 0.0597364655078161; ...
        0.0595659476425594; 0.0593985473761599; 0.0592342407085925; ...
        0.0590730040907638; 0.0589148144213342; 0.0587596490435482; ...
        0.0586074857420752; 0.0584583027398655; 0.0583120786950229; ...
        0.0581687926976972; 0.058028424267; 0.0578909533479455; ...
        0.0577563603084181; 0.0576246259361708; 0.0574957314358547; ...
        0.0573696584260834; 0.0572463889365316; 0.0571259054050733; ...
        0.0570081906749576; 0.0568932279920263; 0.0567810010019736; ...
        0.0566714937476499; 0.0565646906664103; 0.0564605765875101; ...
        0.0563591367295472; 0.056260356697954; 0.0561642224825388; ...
        0.0560707204550775; 0.0559798373669578; 0.0558915603468756; ...
        0.0558058768985846; 0.0557227748987005; 0.0556422425945598; ...
        0.0555642686021342; 0.0554888419040016; 0.0554159518473729; ...
        0.0553455881421774; 0.0552777408592052; 0.0552124004283079; ...
        0.055149557636659; 0.0550892036270722; 0.0550313298963804; ...
        0.054975928293874; 0.0549229910198; 0.054872510623921; ...
        0.0548244800041356; 0.0547788924051602; 0.0547357414172714; ...
        0.0546950209751108; 0.0546567253565512; 0.054620849181625; ...
        0.054587387411515; 0.0545563353476069; 0.0545276886306051; ...
        0.054501443239711; 0.0544775954918636; 0.0544561420410433; ...
        0.0544370798776393; 0.0544204063278785; 0.0544061190533195; ...
        0.0543942160504083; 0.0543846956500981; 0.0543775565175321; ...
        0.0543727976517897; 0.0543704183856963; 1]);
end

s = double(x);
y = step(Hd,s);

